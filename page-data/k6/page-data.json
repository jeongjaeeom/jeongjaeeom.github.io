{"componentChunkName":"component---src-templates-post-jsx","path":"/k6/","result":{"data":{"site":{"siteMetadata":{"title":"jeongjae's.blog"}},"markdownRemark":{"id":"f7994097-ad82-5849-98ec-072a86d3e3f0","excerpt":"부하테스트 도구 중 하나인 k6로 부하테스트 시작해보자  k6 설치 는 k6에서 사용하는 PGP V4 서명을 지원하지 않기 때문에 설치시 비활성화 옵션을 추가하여 설치 k6 실행 k6는 JavaScript ES6 모듈로 작성할 수 있다. 다음 코드를 복사하여 script.js로 저장하자. 다음 명령으로 k6를 실행할 수 있다. 실행결과    총 290번 …","html":"<blockquote>\n<p>부하테스트 도구 중 하나인 k6로 부하테스트 시작해보자 </p>\n</blockquote>\n<h2>k6 설치</h2>\n<p><code class=\"language-text\">Amazon Linux 2</code>는 k6에서 사용하는 PGP V4 서명을 지원하지 않기 때문에 설치시 비활성화 옵션을 추가하여 설치</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">$ <span class=\"token function\">sudo</span> yum <span class=\"token function\">install</span> https://dl.k6.io/rpm/repo.rpm\n$ <span class=\"token function\">sudo</span> yum <span class=\"token function\">install</span> --nogpgcheck k6 -y</code></pre></div>\n<h2>k6 실행</h2>\n<p>k6는 JavaScript ES6 모듈로 작성할 수 있다.<br>\n다음 코드를 복사하여 script.js로 저장하자.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> http <span class=\"token keyword\">from</span> <span class=\"token string\">'k6/http'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> sleep <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'k6'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> options <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">vus</span><span class=\"token operator\">:</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">duration</span><span class=\"token operator\">:</span> <span class=\"token string\">'30s'</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  http<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'http://test.k6.io'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">sleep</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>다음 명령으로 k6를 실행할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">$ k6 run script.js</code></pre></div>\n<h2>실행결과</h2>\n<p><figure class='gatsby-resp-image-figure' style='margin-bottom: 16px;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; '>\n      <a class='gatsby-resp-image-link' href='/static/af5129e1e2a5986a2187379d8ecd9b79/3cde6/k6-script-result.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 64.11764705882354%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABYlAAAWJQFJUiTwAAAB40lEQVQ4y41TWXIiMRTrw4Tppvd935cAAQKhau5/FI2eWYpUMZP5eCW37SdLslvzoxZB0iOIO6zdEoadw7Ay/Fon0M1U4X38P6XpbDacErqVwwpbmH4Ny28eZP9qfrWuWV5FgiuJFTQPXDvFj2peEnphg34+wk0nWq6w0iOsjPiK+h2vc8q+4G38ilSzmZvkFxULvHREkI3wkwF+JuMJQT6zJjgRM6Ybm7FINPpTzt8IHb+CG9SI2BSmA2JiJGQkFQx5iKBLEonBsFl/iUMO0LJyRipFopiNUkk+IqveEfEAmU9ENaMxnRxvzxHcrK+eItAst8AwHVF3O3hUIU/G4ELS7RF1B3hUKlZFoVyWx3gczslTE/viUCIS1UqhEPYkXLYXtP0ePrNyvBIN5/L5jHI4KPJ6PCJu96iI2XJRPTHnxUkzn2CTVBQrwm48kPAL7bBXKm0S1tMnkv6AlA3SWLQ7hTkxbHYo6406IC5mFCKk2twVlhiXE6b3M5r+AyGtmPxbGirJqUROj9sPdMsZ6fCJlphvf6v92XRC2XFtc4HLV/KwLIRVu1XPRw6QyqjG56a43sJmDB7LZobu7W/yxYlyIxn23zMU+S43i1X5FkI3GRWRXISgyTm5Rbm0Bz6Pb8/mDzMWo6y0ubuQAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='k6-실행결과' title='k6-실행결과' src='/static/af5129e1e2a5986a2187379d8ecd9b79/ca1dc/k6-script-result.png' srcset='/static/af5129e1e2a5986a2187379d8ecd9b79/e7570/k6-script-result.png 170w,\n/static/af5129e1e2a5986a2187379d8ecd9b79/f46e7/k6-script-result.png 340w,\n/static/af5129e1e2a5986a2187379d8ecd9b79/ca1dc/k6-script-result.png 680w,\n/static/af5129e1e2a5986a2187379d8ecd9b79/02d09/k6-script-result.png 1020w,\n/static/af5129e1e2a5986a2187379d8ecd9b79/9d567/k6-script-result.png 1360w,\n/static/af5129e1e2a5986a2187379d8ecd9b79/3cde6/k6-script-result.png 2014w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>k6-실행결과</figcaption>\n  </figure>  </p>\n<p>총 290번 요청 되었다 <code class=\"language-text\">sleep(1)</code>이 주어졌기 때문이다. 즉, 초당 10명의 가상유저가 30초 동안 요청을 한 것으로 알 수 있다.</p>\n<p>이번엔 Grafana와 InfluxDB를 사용하여 모니터링을 해보자.</p>\n<h2>Grafana 설치 및 실행</h2>\n<h3>Grafana YUM 저장소 추가</h3>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">$ <span class=\"token function\">sudo</span> yum update -y\n$ <span class=\"token function\">sudo</span> <span class=\"token function\">vim</span> /etc/yum.repos.d/grafana.repo</code></pre></div>\n<p>아래 내용 추가</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">[grafana]\nname=grafana\nbaseurl=https://packages.grafana.com/oss/rpm\nrepo_gpgcheck=1\nenabled=1\ngpgcheck=1\ngpgkey=https://packages.grafana.com/gpg.key\nsslverify=1\nsslcacert=/etc/pki/tls/certs/ca-bundle.crt</code></pre></div>\n<h3>YUM 리포지토리 확인</h3>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">sudo</span> yum repolist</code></pre></div>\n<p><span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;'>\n      <a class='gatsby-resp-image-link' href='/static/9b6347645ed78cb6865b2c66cf253dfd/2fa46/grafana-yum-list.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 23.52941176470588%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAABYlAAAWJQFJUiTwAAAA/ElEQVQY001Q2W6DMBDkX5qSkHCEy+Z2AIPD1SitUvX/f2TqtYrUh9WO7Z2dGVvq/kTbr+jkhqpRiNIbWC4RsxZBVINrHCbCFL2FsQDLeoPPXoY3O8bhGOP9lOB4ZrDK4RPXbITLJDw+wo8auEEBx800IYcXlLj4uTmTgJq/MGgTWTkg4a0RJuyHlV6cwFLbD+ruA3J+oe4fkOqJsrmbAVKlsp3UDJPAtL4guhWVmEyvxYx+fKCoFbxrCWvZvo3SwY605RSnCzdEikOLKAYVYbonh6JdwAtpeOSa5b2Zd1wOa1q0s9ts/oWi7Y72Zf87xSbnJLp/g/NnYOf8AuijpCiPF9vUAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='grafana yum list' title='grafana yum list' src='/static/9b6347645ed78cb6865b2c66cf253dfd/ca1dc/grafana-yum-list.png' srcset='/static/9b6347645ed78cb6865b2c66cf253dfd/e7570/grafana-yum-list.png 170w,\n/static/9b6347645ed78cb6865b2c66cf253dfd/f46e7/grafana-yum-list.png 340w,\n/static/9b6347645ed78cb6865b2c66cf253dfd/ca1dc/grafana-yum-list.png 680w,\n/static/9b6347645ed78cb6865b2c66cf253dfd/02d09/grafana-yum-list.png 1020w,\n/static/9b6347645ed78cb6865b2c66cf253dfd/9d567/grafana-yum-list.png 1360w,\n/static/9b6347645ed78cb6865b2c66cf253dfd/2fa46/grafana-yum-list.png 1526w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span></p>\n<h3>Grafana 설치</h3>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">$ <span class=\"token function\">sudo</span> yum <span class=\"token function\">install</span> grafana</code></pre></div>\n<h3>Grafana 실행</h3>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">$ <span class=\"token function\">sudo</span> systemctl start grafana-server</code></pre></div>\n<h3>Grafana 상태 확인</h3>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">$ <span class=\"token function\">sudo</span> systemctl status grafana-server</code></pre></div>\n<p><span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;'>\n      <a class='gatsby-resp-image-link' href='/static/f350351ef0441510406f393c7297c521/4abe3/grafana-status.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 13.529411764705882%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAnElEQVQI11WPWxKCMAxFWYwKPoBSWhBpi+U1MijsfzXXpvDDx53cZJKTJOjGFab/orYTWue7YUWlRnD5RiYaMG68J7G8QZIpFw0eaY3LVSK8FQcFdlygpx/MvIB8WfWQz3YHGMRsAxA8ZrUfiu6lh50jcdApFAjywkKZCUp/0NgZ5asH1QiSZNrHlG8XUZ5y7XPuFvgP9j7yws39AfOoYoyZ2c4qAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='grafana status' title='grafana status' src='/static/f350351ef0441510406f393c7297c521/ca1dc/grafana-status.png' srcset='/static/f350351ef0441510406f393c7297c521/e7570/grafana-status.png 170w,\n/static/f350351ef0441510406f393c7297c521/f46e7/grafana-status.png 340w,\n/static/f350351ef0441510406f393c7297c521/ca1dc/grafana-status.png 680w,\n/static/f350351ef0441510406f393c7297c521/02d09/grafana-status.png 1020w,\n/static/f350351ef0441510406f393c7297c521/9d567/grafana-status.png 1360w,\n/static/f350351ef0441510406f393c7297c521/4abe3/grafana-status.png 2346w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span></p>\n<h3>Grafana 접속</h3>\n<p>Grafana는 3000번 포트를 사용합니다.\n초기 비밀번호 : admin / admin\n<span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;'>\n      <a class='gatsby-resp-image-link' href='/static/2b9d9df48b00daf8cb9bb7040f323e37/9a1a0/grafana-main.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 76.47058823529412%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABYlAAAWJQFJUiTwAAADZElEQVQ4y1XRyVMaaRjH8Z4kguzILrI1ILuiIiAIQtAY0IhLMC5REcUVI7gcZmqmKjVzmNuc5pRDKvOffucFrXLm8Knn6bd/z9PV3dK3tRbf10/4Z7PNj81zvm9c8K1+zd+rN/xVveXP5R5fF+/5pfLAQ/mR29IjVwsPtIVm4Z693B2NbI/6bI/adBfp18IpXxfO+KN8IVzxe7nD1/INv5W+8PPCLY/FLr1ij5tCj8v5Hm2hle9xmOuym+3SSN+ynvpCbeqGpckOUifdpJttcTfX5j53Llxyl7uim7umM9fhUjjLdjjJ3nAk6kGmw266w/Zsh82Za9amr6gmL1mauKAUP0f6PLHPUfKA1lSTk+kWJzNt4ZzjgSuaqWs+C3tieFdoiAUbU+fUk+esTJ6xnGhTiZ9SjJ6QixwjfQhtsR7ZZjO6y8fYPo34IY1EUzhmKbJOMVyjEl4ZyIVq4rpONd7iXeyYSrRJKXLEfPiQbOiAVHAfqSKvshSosxzc4P34FtXQNrXwDivhPZLyHE5ngk/pGDvZ2KCP+TKUQ/ssjO+TD+6RDe4yG9hhyt8g4dtCyrmWmHcvU/BUKXpXWPB9oCTXKfs3iHkyJCJ5ytkSi7kSE9F5wuIsK38kLcz4Nkl6N0h41oi6Vwm5qkhJe4FpR4nUaJlZZ4X02KLwjrRrmYhnhqAvwqhVxmGRGbN7kZ2TTLprJMRw1PWesMgGnYv4R9/iE3ukkDlNxJIhap0jZssTt80TtxdFLRDyZQnE3+IOzOEJ5hkL5PC6U4yL+wH7ArLIeEXebc3hsojPY84guQ0JvMZJfCNTyCPT+E0z+M2zg+r1pAnMfGI8tUM4c0Akd4pHzuMSuTGRGRUZh+gdYtZmTGI1TCDZNAHsmnEc2hAOnXg9XZRRvfgB+jgOYxi7wY/tmdUgYzWGRI1jMcSw6KOY9RFMurAQwqgNIumVTgzDLowqNyMqj+BlRO0TZExqPyPigX3GPm0Ag8aPQSuL6hvQa7zo1B7BjVblQlINmVANmVEpLKgVVtRKm2B/Mtzn+B/Ns5czOyoxM6y0Mix2SK9+UvNEw+tXfVpBx5vX+oGhN4ZnRhT/8XKuf87qBrPS0JCKF+oBhUKDTmdCqzWh69OZB71ebxn0/apU6lAqtIPsE/Vgx79KTdPQ7Jl3ugAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='grafana main' title='grafana main' src='/static/2b9d9df48b00daf8cb9bb7040f323e37/ca1dc/grafana-main.png' srcset='/static/2b9d9df48b00daf8cb9bb7040f323e37/e7570/grafana-main.png 170w,\n/static/2b9d9df48b00daf8cb9bb7040f323e37/f46e7/grafana-main.png 340w,\n/static/2b9d9df48b00daf8cb9bb7040f323e37/ca1dc/grafana-main.png 680w,\n/static/2b9d9df48b00daf8cb9bb7040f323e37/02d09/grafana-main.png 1020w,\n/static/2b9d9df48b00daf8cb9bb7040f323e37/9d567/grafana-main.png 1360w,\n/static/2b9d9df48b00daf8cb9bb7040f323e37/9a1a0/grafana-main.png 3410w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span></p>\n<h2>InfluxDB 설치 및 실행</h2>\n<h3>YUM 저장소 추가</h3>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">$ <span class=\"token function\">cat</span> <span class=\"token operator\">&lt;&lt;</span>EOF <span class=\"token operator\">|</span> <span class=\"token function\">sudo</span> <span class=\"token function\">tee</span> /etc/yum.repos.d/influxdb.repo</code></pre></div>\n<p>아래 내용 추가</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">[influxdb]\nname = InfluxDB Repository - RHEL 7\nbaseurl = https://repos.influxdata.com/rhel/7/x86_64/stable\nenabled = 1\ngpgcheck = 1\ngpgkey = https://repos.influxdata.com/influxdb.key\nEOF</code></pre></div>\n<h3>YUM 리포지토리 확인</h3>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">sudo</span> yum repolist</code></pre></div>\n<p><span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;'>\n      <a class='gatsby-resp-image-link' href='/static/9b6347645ed78cb6865b2c66cf253dfd/2fa46/grafana-yum-list.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 23.52941176470588%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAABYlAAAWJQFJUiTwAAAA/ElEQVQY001Q2W6DMBDkX5qSkHCEy+Z2AIPD1SitUvX/f2TqtYrUh9WO7Z2dGVvq/kTbr+jkhqpRiNIbWC4RsxZBVINrHCbCFL2FsQDLeoPPXoY3O8bhGOP9lOB4ZrDK4RPXbITLJDw+wo8auEEBx800IYcXlLj4uTmTgJq/MGgTWTkg4a0RJuyHlV6cwFLbD+ruA3J+oe4fkOqJsrmbAVKlsp3UDJPAtL4guhWVmEyvxYx+fKCoFbxrCWvZvo3SwY605RSnCzdEikOLKAYVYbonh6JdwAtpeOSa5b2Zd1wOa1q0s9ts/oWi7Y72Zf87xSbnJLp/g/NnYOf8AuijpCiPF9vUAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='grafana yum list' title='grafana yum list' src='/static/9b6347645ed78cb6865b2c66cf253dfd/ca1dc/grafana-yum-list.png' srcset='/static/9b6347645ed78cb6865b2c66cf253dfd/e7570/grafana-yum-list.png 170w,\n/static/9b6347645ed78cb6865b2c66cf253dfd/f46e7/grafana-yum-list.png 340w,\n/static/9b6347645ed78cb6865b2c66cf253dfd/ca1dc/grafana-yum-list.png 680w,\n/static/9b6347645ed78cb6865b2c66cf253dfd/02d09/grafana-yum-list.png 1020w,\n/static/9b6347645ed78cb6865b2c66cf253dfd/9d567/grafana-yum-list.png 1360w,\n/static/9b6347645ed78cb6865b2c66cf253dfd/2fa46/grafana-yum-list.png 1526w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span></p>\n<h3>InfluxDB 설치</h3>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">$ <span class=\"token function\">sudo</span> yum <span class=\"token function\">install</span> influxdb -y</code></pre></div>\n<h3>InfluxDB 실행</h3>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">$ <span class=\"token function\">sudo</span> systemctl start influxdb</code></pre></div>\n<h3>InfluxDB 상태 확인</h3>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">$ <span class=\"token function\">sudo</span> systemctl status influxdb</code></pre></div>\n<p><span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;'>\n      <a class='gatsby-resp-image-link' href='/static/4c12ce49e5165d775bd88b7db50648cc/6c5d7/influxdb-status.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 18.823529411764707%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAwklEQVQY00WPWQ6CQBBEOYyKoqyOsg+bgiJIjEbvf5Kyuw3x46VmKr1UG/V5QtEMiPNOtKgHqGMFFdbCISJI9+TJO2rEt+wYWyfGanPAcq1ETesI49Q9oPsR+XWAHu/o+if68Y1h+uB6e6GkBUxe9rKM0fQOVClLeCiz2YUy1OCC6jSibH5NcwpO5asCbpATGt6eIN25iXj8t71Majix7aW/gWwkdG6qL6Jx1iJKWyly/IySFNLEyk183sx87sL8n/wFvIaFutY7dhcAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='influxdb status' title='influxdb status' src='/static/4c12ce49e5165d775bd88b7db50648cc/ca1dc/influxdb-status.png' srcset='/static/4c12ce49e5165d775bd88b7db50648cc/e7570/influxdb-status.png 170w,\n/static/4c12ce49e5165d775bd88b7db50648cc/f46e7/influxdb-status.png 340w,\n/static/4c12ce49e5165d775bd88b7db50648cc/ca1dc/influxdb-status.png 680w,\n/static/4c12ce49e5165d775bd88b7db50648cc/02d09/influxdb-status.png 1020w,\n/static/4c12ce49e5165d775bd88b7db50648cc/9d567/influxdb-status.png 1360w,\n/static/4c12ce49e5165d775bd88b7db50648cc/6c5d7/influxdb-status.png 1890w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span></p>\n<h2>InfluxDB를 지정하여 k6 스크립트 실행</h2>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">$ k6 run --out <span class=\"token assign-left variable\">influxdb</span><span class=\"token operator\">=</span>http://localhost:8086/myk6db script.js</code></pre></div>\n<p><span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;'>\n      <a class='gatsby-resp-image-link' href='/static/af5129e1e2a5986a2187379d8ecd9b79/3cde6/k6-script-result.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 64.11764705882354%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABYlAAAWJQFJUiTwAAAB40lEQVQ4y41TWXIiMRTrw4Tppvd935cAAQKhau5/FI2eWYpUMZP5eCW37SdLslvzoxZB0iOIO6zdEoadw7Ay/Fon0M1U4X38P6XpbDacErqVwwpbmH4Ny28eZP9qfrWuWV5FgiuJFTQPXDvFj2peEnphg34+wk0nWq6w0iOsjPiK+h2vc8q+4G38ilSzmZvkFxULvHREkI3wkwF+JuMJQT6zJjgRM6Ybm7FINPpTzt8IHb+CG9SI2BSmA2JiJGQkFQx5iKBLEonBsFl/iUMO0LJyRipFopiNUkk+IqveEfEAmU9ENaMxnRxvzxHcrK+eItAst8AwHVF3O3hUIU/G4ELS7RF1B3hUKlZFoVyWx3gczslTE/viUCIS1UqhEPYkXLYXtP0ePrNyvBIN5/L5jHI4KPJ6PCJu96iI2XJRPTHnxUkzn2CTVBQrwm48kPAL7bBXKm0S1tMnkv6AlA3SWLQ7hTkxbHYo6406IC5mFCKk2twVlhiXE6b3M5r+AyGtmPxbGirJqUROj9sPdMsZ6fCJlphvf6v92XRC2XFtc4HLV/KwLIRVu1XPRw6QyqjG56a43sJmDB7LZobu7W/yxYlyIxn23zMU+S43i1X5FkI3GRWRXISgyTm5Rbm0Bz6Pb8/mDzMWo6y0ubuQAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='k6 script result' title='k6 script result' src='/static/af5129e1e2a5986a2187379d8ecd9b79/ca1dc/k6-script-result.png' srcset='/static/af5129e1e2a5986a2187379d8ecd9b79/e7570/k6-script-result.png 170w,\n/static/af5129e1e2a5986a2187379d8ecd9b79/f46e7/k6-script-result.png 340w,\n/static/af5129e1e2a5986a2187379d8ecd9b79/ca1dc/k6-script-result.png 680w,\n/static/af5129e1e2a5986a2187379d8ecd9b79/02d09/k6-script-result.png 1020w,\n/static/af5129e1e2a5986a2187379d8ecd9b79/9d567/k6-script-result.png 1360w,\n/static/af5129e1e2a5986a2187379d8ecd9b79/3cde6/k6-script-result.png 2014w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span></p>\n<h2>Grafana 설정</h2>\n<h3>Data Source 추가</h3>\n<p><code class=\"language-text\">Configuration</code> > <code class=\"language-text\">Data sources</code> 메뉴에서 <code class=\"language-text\">Add data source</code> 클릭하여 추가합니다.<br>\n아래 쪽에 <code class=\"language-text\">Database</code> 항목에 위에서 실행했던 <code class=\"language-text\">myk6db</code>입력 후 <code class=\"language-text\">Save &amp; test</code> 클릭.\n<span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;'>\n      <a class='gatsby-resp-image-link' href='/static/cb98dc5316d2059131b03d50168d3977/d621b/datasource.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 118.23529411764706%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAYCAYAAAD6S912AAAACXBIWXMAAAsTAAALEwEAmpwYAAACnElEQVQ4y5WVOXLbQBBFcQQtxL4QO0BsXEXRrrIcOHGgcuDMiRMfwZlP4Bv5eN+/G6IkWhYpBq8GQM18dE//njGSJIOVLFDVczIgzWYIoxyXVzaurp2zMdwgQRCWiKc5TMvH9cRVRFC4uDSV/fspDC9M0LQVukUHywth2j5MJ4ClhPDClOSw3PAotoycb/hcEKUV0rKBx2jlo+1GOsnxIkxlC9IGjh+R6VFszjdkYSyC+YwCUxV8GUHAyeOC11BBBmJIqGFc6Ms+VR3dMdLnfz8W2UGE5WxAVnaIkgpJViMvW03ftEfh/eTXRA8FGU1R92RQwSguaZtMU59YnkZ8lqCkJVGJfRw/hkuipEBAG4kDTqX7QlBs0s+3mK92mKY1YkbZDhvkVc9i1RAXnCUoKcnitt8gpkUCSZdVFU8eVPCcouRVh2G5ZZqZCp3y20kfFkWJYb7WPVS7HPHbMWStYdku2k8/0e6+Ik1zdk2tvnyd8h/G71FSapsapmni9scf7L78wma1xPrmA+ZMf768VYbFltxgsbpl8W5QtyvMOmGNGZ8LnlJp0WodxHKM0EF//xvN+2+MMKXBe9I+0B2Q5A2dUP2XmNbzWVBDDJzzYEjYyxK6Q19eTZzHY+ysPZVelr5t+rWmEangFNemp/0snPLgiyqrIPeiH7YqaLF/RfB5u709wnBMOWgqBLROEGaKxytA9sMNYm3JN/HQpoYjgp+XyN6RgpVqO/qyQFE142FBO7wFKYy0qRHxENADdtZhkw24j3aY3X1H0t4xBR8OozxrD8Mw0g7x2XZFkGPl0hrtR3hxz+PL1TNR7xklePYeYMJxj3yb8JIz8qLS286WCY6PC8eDS2/6vEMCpvBEomMYjc8hn8VismWO+8RfEs6H/ygmELAAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='datasource' title='datasource' src='/static/cb98dc5316d2059131b03d50168d3977/ca1dc/datasource.png' srcset='/static/cb98dc5316d2059131b03d50168d3977/e7570/datasource.png 170w,\n/static/cb98dc5316d2059131b03d50168d3977/f46e7/datasource.png 340w,\n/static/cb98dc5316d2059131b03d50168d3977/ca1dc/datasource.png 680w,\n/static/cb98dc5316d2059131b03d50168d3977/02d09/datasource.png 1020w,\n/static/cb98dc5316d2059131b03d50168d3977/9d567/datasource.png 1360w,\n/static/cb98dc5316d2059131b03d50168d3977/d621b/datasource.png 1439w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span></p>\n<h3>대시보드 설정</h3>\n<p><code class=\"language-text\">Dashboards</code> > <code class=\"language-text\">Import</code> > 'Import via Grafana.com' 항목에 2587을 입력\n<span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;'>\n      <a class='gatsby-resp-image-link' href='/static/1a4f48a9b260ededb575fe311cb4bc60/79e31/add-dashboard.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 71.76470588235294%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAABkElEQVQ4y42Ty07CQBSG+wIK9DKXzvQKCLQVVBIvJGICC2N8ABcuNO7c+Ag+hgtf9vdMWxECFhZfOs3MfOef6ak16HURBCkupjPkxRSXV3OcnV9DyAiu56PV9tDusIOxZNiDyxSkDOB5EozGQgTgNbYjShxXls+9wmyUw6ONKhoi6hbQcYYwGcHjCjrsQqoYwg8RRD34OoFDqU0Al2nC38LKRwW4SjB5/MTi5QuL129k8zcw4UMYmYpKuAqrsY5pToBxvppbx9JU2SRIT06JMcI0A6P7Y5SayZq1scd9RNkdkvE9uNRUiIrR/l8sFaY0EaA/KBDFffi0wBzX43oLI3ZchuHsGZPlO72r7YS8rhwlA3T7OUziajNJdlBKbYewq6uok/0J6cUs6tgcxy33wDbh9HFUs9C0hZEegpE61GLNQqrYrhc3YldPE6BR2Do+ItroUPPuTVke2f9faC67WH4gnTzQ38JoAS2UYQPBSrIu2xCObp6Q5LeUVm40dBO7pKsju65D7SJK2XqjNrEr4Q/90G7iDCK0BwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='add dashboard' title='add dashboard' src='/static/1a4f48a9b260ededb575fe311cb4bc60/ca1dc/add-dashboard.png' srcset='/static/1a4f48a9b260ededb575fe311cb4bc60/e7570/add-dashboard.png 170w,\n/static/1a4f48a9b260ededb575fe311cb4bc60/f46e7/add-dashboard.png 340w,\n/static/1a4f48a9b260ededb575fe311cb4bc60/ca1dc/add-dashboard.png 680w,\n/static/1a4f48a9b260ededb575fe311cb4bc60/79e31/add-dashboard.png 951w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span></p>\n<p>'Select a InfluxDB Data source' 항목에 위에서 만들어 둔 InfluxDB 데이터 소스 추가\n<span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;'>\n      <a class='gatsby-resp-image-link' href='/static/1ade3779d51db089f59527002604456f/3e3fe/dashboard-influxdb.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 69.41176470588235%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB8klEQVQ4y3WTW27bMBBFtYIiSK23SD1JvV92XCsJUrQ/RX+KbqPoGrqc7vN2hrHTyIk+DkjZ5OXM3BkrTjV03UNVHap2ov1gvlM9QKoZIh8QSAU3EIQ883q/xkqyEk23R93NRrBsRqiyM4KxnhGrEWGs4YUx/CgxhDInstVvFyyZKozzCblu4dDLfMgcNEg6FCMQCZGZC3x+PtxjoDtJXhrhQKQvWFGco+n3EElhQr4IMu6FVymxaExZpUWNgjLxrv63VNVj3C/mJduPVoJb8EXOxvHFmyAsfilXDSKqC0fLB2w3guNFsN/BOeP6chXdiyCbUtajEdUUbRClJBg+C7pbhCa6i+AqQq7JR9vHhxsbN7cObnee+V6x4zXAzmFCw6ZgRpGxyxPVUVcDmaOo6Nq4KalHuU85Cy7JtYBLXeAF6/pa3MjLwxccT59xOD5ivnsw4u1wQD8e0U/P1NSr3H9cip3LNdyIMCJ3c90gI3M42oL6kaNjg7iVzHreB9STdz/+4Puvv2i//obtuCSSrE2J8xa+rOAJRWja01RENGpRcUb9X8MConxENnyD0IsZweuWspKiRzccMU4nYkFVT0izGjKh+iXlGwRlJGhyBI2jG6ZUw+uUC6rV8hPT4YnM+WQMEHFBgmoDNopGjkbxPaf/AcHWgMU2G2t5AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='dashboard influxdb' title='dashboard influxdb' src='/static/1ade3779d51db089f59527002604456f/ca1dc/dashboard-influxdb.png' srcset='/static/1ade3779d51db089f59527002604456f/e7570/dashboard-influxdb.png 170w,\n/static/1ade3779d51db089f59527002604456f/f46e7/dashboard-influxdb.png 340w,\n/static/1ade3779d51db089f59527002604456f/ca1dc/dashboard-influxdb.png 680w,\n/static/1ade3779d51db089f59527002604456f/3e3fe/dashboard-influxdb.png 860w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span></p>\n<p>이렇게 k6를 활용하여 부하테스트 진행 및 모니터링을 진행하는 방법을 알아보았다.<br>\n다음 포스팅에는 k6에서 제공하는 스크립트를 활용한 여러가지 부하테스트를 알아보도록 하자. </p>\n<h2>참고</h2>\n<ul>\n<li><a href=\"https://k6.io/docs/getting-started/installation\">https://k6.io/docs/getting-started/installation</a></li>\n<li><a href=\"https://k6.io/docs/getting-started/running-k6\">https://k6.io/docs/getting-started/running-k6</a></li>\n<li><a href=\"https://k6.io/docs/getting-started/results-output\">https://k6.io/docs/getting-started/results-output</a></li>\n<li><a href=\"https://www.radishlogic.com/aws/ec2/how-to-install-grafana-on-ec2-amazon-linux-2\">https://www.radishlogic.com/aws/ec2/how-to-install-grafana-on-ec2-amazon-linux-2</a></li>\n<li><a href=\"https://techviewleo.com/how-to-install-influxdb-on-amazon-linux\">https://techviewleo.com/how-to-install-influxdb-on-amazon-linux</a></li>\n</ul>","frontmatter":{"title":"k6로 부하테스트 시작하기","date":"October 31, 2022","update":"October 31, 2022","tags":["k6","load-testing","test","grafana","influxDB"],"series":null},"fields":{"slug":"/k6/","readingTime":{"minutes":3.325}}},"seriesList":{"edges":[{"node":{"id":"99508f11-35e0-5f0d-a79c-dbee96ebed35","fields":{"slug":"/pinpoint-install/"},"frontmatter":{"title":"AWS EC2 Pinpoint 설치"}}},{"node":{"id":"0bbd7846-1789-58db-b835-f76cfa640733","fields":{"slug":"/dns/"},"frontmatter":{"title":"DNS(Domain Name System) 이해하기"}}},{"node":{"id":"7e3fa059-60fc-5ae7-bc0a-566ddc914e70","fields":{"slug":"/pinpoint-install-with-docker/"},"frontmatter":{"title":"AWS EC2 Pinpoint 설치 with docker"}}},{"node":{"id":"4f03a198-05fe-5536-9449-d9afd51f0240","fields":{"slug":"/git-mirror/"},"frontmatter":{"title":"Git 저장소 복제 하기"}}},{"node":{"id":"d84df2cc-64cf-5fa0-9a2f-6f60a8e87e38","fields":{"slug":"/linux-basic-terminal-settings/"},"frontmatter":{"title":"리눅스 서버 터미널 기본 설정"}}},{"node":{"id":"abc61d39-be7d-56c6-99cc-198e11301247","fields":{"slug":"/kotlin-spring-woowahan-tech/"},"frontmatter":{"title":"우아한테크세미나 코프링 정리"}}},{"node":{"id":"faff82ef-b7a2-55ce-86de-406f5ae54be6","fields":{"slug":"/spring-data-jpa-entity-kotlin-private-setter/"},"frontmatter":{"title":"Kotlin에서 JPA Entity 멤버변수 private set 사용 시 주의사항"}}},{"node":{"id":"f7994097-ad82-5849-98ec-072a86d3e3f0","fields":{"slug":"/k6/"},"frontmatter":{"title":"k6로 부하테스트 시작하기"}}}]},"previous":{"fields":{"slug":"/spring-data-jpa-entity-kotlin-private-setter/"},"frontmatter":{"title":"Kotlin에서 JPA Entity 멤버변수 private set 사용 시 주의사항"}},"next":null},"pageContext":{"id":"f7994097-ad82-5849-98ec-072a86d3e3f0","series":null,"previousPostId":"faff82ef-b7a2-55ce-86de-406f5ae54be6","nextPostId":null}},"staticQueryHashes":[]}