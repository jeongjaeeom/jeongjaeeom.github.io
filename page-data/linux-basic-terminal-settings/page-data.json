{"componentChunkName":"component---src-templates-post-jsx","path":"/linux-basic-terminal-settings/","result":{"data":{"site":{"siteMetadata":{"title":"jeongjae's.blog"}},"markdownRemark":{"id":"d84df2cc-64cf-5fa0-9a2f-6f60a8e87e38","excerpt":"리눅스 서버 설치 후 기본적인 터미널 설정을 진행해봅니다.   인스턴스의  기준으로 작성되었습니다. 터미널 세션 타임아웃(Sessio Timeout) 설정 Sessio Timeout을 설정 하여 일정 시간 작업을 하지 않을 경우 터미널 연결을 해제 하도록 설정할 수 있습니다. 프로파일(.profile) 파일 생성 및 내용 입력  - history 명령 결…","html":"<p>리눅스 서버 설치 후 기본적인 터미널 설정을 진행해봅니다.  </p>\n<blockquote>\n<p><code class=\"language-text\">AWS EC2</code>인스턴스의 <code class=\"language-text\">Amazon Linux 2</code> 기준으로 작성되었습니다.</p>\n</blockquote>\n<h2>터미널 세션 타임아웃(Sessio Timeout) 설정</h2>\n<p>Sessio Timeout을 설정 하여 일정 시간 작업을 하지 않을 경우 터미널 연결을 해제 하도록 설정할 수 있습니다.</p>\n<p>프로파일(.profile) 파일 생성 및 내용 입력</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">$ <span class=\"token function\">sudo</span> <span class=\"token function\">vi</span> ~/.profile\n<span class=\"token assign-left variable\">HISTTIMEFORMAT</span><span class=\"token operator\">=</span><span class=\"token string\">\"%F %T -- \"</span>\n<span class=\"token builtin class-name\">export</span> HISTTIMEFORMAT\n<span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\">TMOUT</span><span class=\"token operator\">=</span><span class=\"token number\">600</span> \n\n$ <span class=\"token builtin class-name\">source</span> ~/.profile</code></pre></div>\n<ul>\n<li><code class=\"language-text\">HISTTIMEFORMAT</code> - history 명령 결과에 시간 값을 추가한다.</li>\n<li><code class=\"language-text\">TMOUT=600</code> - 세션 타임아웃을 설정한다(초 단위).</li>\n</ul>\n<h2>쉘(Shell) Prompt 변경하기</h2>\n<p>Bastion 서버 등과 같이 서버를 구분해야하는 경우에 Shell Prompt를 설정하여 서버 관리자의 인적 장애를 예방할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">$ <span class=\"token function\">sudo</span> <span class=\"token function\">vi</span> ~/.bashrc\n<span class=\"token assign-left variable\">USERNAME</span><span class=\"token operator\">=</span>BASTION\n<span class=\"token assign-left variable\"><span class=\"token environment constant\">PS1</span></span><span class=\"token operator\">=</span><span class=\"token string\">'[\\e[1;31m$USERNAME\\e[0m][\\e[1;32m\\t\\e[0m][\\e[1;33m\\u\\e[0m@\\e[1;36m\\h\\e[0m \\w] \\n\\$ \\[\\033[00m\\]'</span>\n\n$ <span class=\"token builtin class-name\">source</span> ~/.bashrc</code></pre></div>\n<h2>Logger를 사용하여 감사로그 남기기</h2>\n<p>서버에서 작업할 경우, 작업 이력 히스토리를 기록해 두어야 장애 발싱시 원인 분석을 할 수 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">$ <span class=\"token function\">sudo</span> <span class=\"token function\">vi</span> ~/.bashrc\n<span class=\"token assign-left variable\">tty</span><span class=\"token operator\">=</span><span class=\"token variable\"><span class=\"token variable\">`</span><span class=\"token function\">tty</span> <span class=\"token operator\">|</span> <span class=\"token function\">awk</span> -F<span class=\"token string\">\"/dev/\"</span> <span class=\"token string\">'{print $2}'</span><span class=\"token variable\">`</span></span>\n<span class=\"token assign-left variable\">IP</span><span class=\"token operator\">=</span><span class=\"token variable\"><span class=\"token variable\">`</span>w <span class=\"token operator\">|</span> <span class=\"token function\">grep</span> <span class=\"token string\">\"<span class=\"token variable\">$tty</span>\"</span> <span class=\"token operator\">|</span> <span class=\"token function\">awk</span> <span class=\"token string\">'{print $3}'</span><span class=\"token variable\">`</span></span>\n<span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\">PROMPT_COMMAND</span><span class=\"token operator\">=</span><span class=\"token string\">'logger -p local0.debug \"[USER]$(whoami) [IP]$IP [PID]$$ [PWD]`pwd` [COMMAND] $(history 1 | sed \"s/^[ ]*[0-9]\\+[ ]*//\" )\"'</span>\n\n$ <span class=\"token builtin class-name\">source</span>  ~/.bashrc</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">$ <span class=\"token function\">sudo</span> <span class=\"token function\">vi</span> /etc/rsyslog.d/50-default.conf\nlocal0.*  /var/log/command.log\n\n$ <span class=\"token function\">sudo</span> <span class=\"token function\">service</span> rsyslog restart\n$ <span class=\"token function\">tail</span> -f /var/log/command.log</code></pre></div>\n<h2>참고</h2>\n<ul>\n<li><a href=\"https://edu.nextstep.camp/c/VI4PhjPA/\">인프라 공방</a></li>\n</ul>","frontmatter":{"title":"리눅스 서버 터미널 기본 설정","date":"October 17, 2022","update":null,"tags":["linux","terminal","shell","aws"],"series":null},"fields":{"slug":"/linux-basic-terminal-settings/","readingTime":{"minutes":1.725}}},"seriesList":{"edges":[{"node":{"id":"4e052d75-6833-5215-9a25-4089d41152ee","fields":{"slug":"/jvm-internals/"},"frontmatter":{"title":"[번역] JVM Internals"}}},{"node":{"id":"99508f11-35e0-5f0d-a79c-dbee96ebed35","fields":{"slug":"/pinpoint-install/"},"frontmatter":{"title":"AWS EC2 Pinpoint 설치"}}},{"node":{"id":"7e3fa059-60fc-5ae7-bc0a-566ddc914e70","fields":{"slug":"/pinpoint-install-with-docker/"},"frontmatter":{"title":"AWS EC2 Pinpoint 설치 with docker"}}},{"node":{"id":"4f03a198-05fe-5536-9449-d9afd51f0240","fields":{"slug":"/git-mirror/"},"frontmatter":{"title":"Git 저장소 복제 하기"}}},{"node":{"id":"d84df2cc-64cf-5fa0-9a2f-6f60a8e87e38","fields":{"slug":"/linux-basic-terminal-settings/"},"frontmatter":{"title":"리눅스 서버 터미널 기본 설정"}}},{"node":{"id":"abc61d39-be7d-56c6-99cc-198e11301247","fields":{"slug":"/kotlin-spring-woowahan-tech/"},"frontmatter":{"title":"우아한테크세미나 코프링 정리"}}},{"node":{"id":"faff82ef-b7a2-55ce-86de-406f5ae54be6","fields":{"slug":"/spring-data-jpa-entity-kotlin-private-setter/"},"frontmatter":{"title":"Kotlin에서 JPA Entity 멤버변수 private set 사용 시 주의사항"}}}]},"previous":{"fields":{"slug":"/git-mirror/"},"frontmatter":{"title":"Git 저장소 복제 하기"}},"next":{"fields":{"slug":"/kotlin-spring-woowahan-tech/"},"frontmatter":{"title":"우아한테크세미나 코프링 정리"}}},"pageContext":{"id":"d84df2cc-64cf-5fa0-9a2f-6f60a8e87e38","series":null,"previousPostId":"4f03a198-05fe-5536-9449-d9afd51f0240","nextPostId":"abc61d39-be7d-56c6-99cc-198e11301247"}},"staticQueryHashes":[]}